<!DOCTYPE html>
<html>

    <head>

        <title>Avatar Controller</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}">

    </head>

    <body>

        <h1 style="text-align: center; font-size: 40px;">
            Avatar Controller
        </h1>

        <canvas id="videoCanvas" width="640" height="480"></canvas>
    
        <!-- Load image -->
        <div style="display: none;">

            <img id="raise" src="{{url_for('static', filename='images/Raise.png')}}">
            <img id="raisePressed" src="{{url_for('static', filename='images/RaisePressed.png')}}">
            <img id="lower" src="{{url_for('static', filename='images/Lower.png')}}">
            <img id="lowerPressed" src="{{url_for('static', filename='images/LowerPressed.png')}}">
            <img id="unpressed" src="{{url_for('static', filename='images/Unpressed.png')}}">
            <img id="pressed" src="{{url_for('static', filename='images/Pressed.png')}}">
            <img id="slowMode" src="{{url_for('static', filename='images/SlowMode.png')}}">
            <img id="normalMode" src="{{url_for('static', filename='images/NormalMode.png')}}">
        
        </div>
        
        <!-- js will put images here -->
        <div style="text-align: right; position: relative; display: block;">
            <div style="display: inline-block; position: relative;" id="buttons"></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="{{url_for('static', filename='js/buttons.js')}}"></script>
        <script src="{{url_for('static', filename='js/keyInput.js')}}"></script>
        <script type="text/javascript" src="{{url_for('static', filename='js/jsmpg.js')}}"></script>
        <script type="text/javascript">

            // Show loading notice
            let canvas = document.getElementById('videoCanvas');
            let ctx = canvas.getContext('2d');
            ctx.fillText('Loading...', canvas.width/2-30, canvas.height/3);

            // Setup the WebSocket connection and start the player
            let client = new WebSocket('ws://' + window.location.hostname + ':8084');
            let player = new jsmpeg(client, {canvas:canvas});

        </script>

    </body>

</html>